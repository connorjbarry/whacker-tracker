import math
from tabulate import tabulate
import matplotlib.pyplot as plt

G = 9.80665

CLUBHEADTOBALL = {
    "driver": 1.477876,
    "3wood": 1.476636,
    "5wood": 1.475728,
    "hybrid": 1.460112,
    "2iron": 1.454545,
    "3iron": 1.448980,
    "4iron": 1.427083,
    "5iron": 1.404255,
    "6iron": 1.3840435,
    "7iron": 1.333333,
    "8iron": 1.321839,
    "9iron": 1.2822353,
    "pw": 1.228916,
    "gw": 1.222222,
    "sw": 1.157895,
}

CLUBLOFT = {
    "driver": 10.5,
    "3wood": 15,
    "5wood": 18,
    "hybrid": 21,
    "2iron": 16,
    "3iron": 21,
    "4iron": 24,
    "5iron": 27,
    "6iron": 30,
    "7iron": 34,
    "8iron": 38,
    "9iron": 42,
    "pw": 46,
    "gw": 51,
    "sw": 54,
}

DISTMULTIPLIER_CH = 3.16
DISTMULTIPLIER_BS = 2.04

CLUB_MASS = 0

TIME_PER_DATA_POLL = 0.038


"""
? DATA FORMAT:
[     0]   -993 -> angular x
[     1]   -580 -> angular y
[     2]  -1153 -> angular z
[     3]  -2734 -> linear x
[     4]    503 -> linear y
[     5]   1561 -> linear z

[     0]   -381
[     1]   -790
[     2]    437
[     3]   -224
[     4]   1391
[     5]   1181

[     0]    183
[     1]   -187
[     2]    610
[     3]   -216
[     4]   1327
[     5]   1402

Data comes in as a list of 6 values, the first three being the angular (x, y, z) acceleration (dps -> degrees per second) of the club, and the last three being the linear (x, y, z) acceleration (g) of the club.


* linear_accel = [data[i::3] for i in range(3)]

data = [
 -794,
 -222,
   57,
 -107,
 1301,
 1486,
 -759,
 -343,
  -23,
  -73,
 1245,
 1706,
 -667,
 -397,
  -92,
  -63,
 1197,
 1861,
 -553,
 -376,
 -108,
  -67,
 1171,
 1916,
 -471,
 -310,
  -92,
  -65,
 1135,
 1866,
 -461,
 -211,
  -60,
  -63,
 1090,
 1861
]

data2 = [
 -381,
 -790,
  437,
 -224,
 1391,
 1181,
 -765,
  -86,
  286,
 -187,
 1384,
 1259,
 -755,
  -64,
  136,
 -158,
 1351,
 1342
]
"""


def process_data(data):
    temp = [
        -794,
        -222,
        57,
        -107,
        1301,
        1486,
        -759,
        -343,
        -23,
        -73,
        1245,
        1706,
        -667,
        -397,
        -92,
        -63,
        1197,
        1861,
        -553,
        -376,
        -108,
        -67,
        1171,
        1916,
        -471,
        -310,
        -92,
        -65,
        1135,
        1866,
        -461,
        -211,
        -60,
        -63,
        1090,
        1861
    ]

    data_length = len(data)
    len_sensor_data = data_length // 3
    sensor_one = data[0:len_sensor_data]
    sensor_two = data[len_sensor_data - 1:len_sensor_data * 2]
    sensor_three = data[len_sensor_data * 2 - 1:len_sensor_data * 3]

    linear_accel = [sensor_one[i:i+3]
                    for i in range(0, len(sensor_one), 3)][1::2]
    angular_accel = [sensor_one[i:i+3]
                     for i in range(0, len(sensor_one), 3)][::2]
    # print(f'linear_accel: {linear_accel}\n angular_accel: {angular_accel}')
    linear_accel_x = _get_gs([x[0] for x in linear_accel])
    angular_accel_x = _get_dps([x[0] for x in angular_accel])
    linear_accel_y = _get_gs([x[1] for x in linear_accel])
    angular_accel_y = _get_dps([x[1] for x in angular_accel])
    linear_accel_z = _get_gs([x[2] for x in linear_accel])
    angular_accel_z = _get_dps([x[2] for x in angular_accel])

    direction = ['' for i in range(len(linear_accel_x))]
    for j, accel in enumerate(angular_accel):
        highestAccel = 0
        for i in range(len(accel)):
            if abs(accel[i]) > highestAccel and i == 0:
                if accel[i] > 0:
                    direction[j] = '+x'
                else:
                    direction[j] = '-x'
                highestAccel = abs(accel[i])
            elif abs(accel[i]) > highestAccel and i == 1:
                if accel[i] > 0:
                    direction[j] = '+y'
                else:
                    direction[j] = '-y'
                highestAccel = abs(accel[i])
            elif abs(accel[i]) > highestAccel and i == 2:
                if accel[i] > 0:
                    direction[j] = '+z'
                else:
                    direction[j] = '-z'
                highestAccel = abs(accel[i])

    total_accel = [math.sqrt(i**2 + j**2 + k**2) for i, j,
                   k in zip(linear_accel_x, linear_accel_y, linear_accel_z)]

    total_angular_accel = [math.sqrt(i**2 + j**2 + k**2) for i, j,
                           k in zip(angular_accel_x, angular_accel_y, angular_accel_z)]
    total_linear_accel = [math.sqrt(i**2 + j**2 + k**2) for i, j,
                          k in zip(linear_accel_x, linear_accel_y, linear_accel_z)]

    total_accel = (_convert_from_g(total_accel))
    total_linear_accel = (_convert_from_g(total_linear_accel))
    linear_accel_z = (_convert_from_g(linear_accel_z))

    return linear_accel, angular_accel, linear_accel_x, linear_accel_y, linear_accel_z, angular_accel_x, angular_accel_y, angular_accel_z, direction, total_accel, total_angular_accel, total_linear_accel


def get_club_head_speed(linear_z, total_accel):
    velo_f = 0

    time_list = [i * TIME_PER_DATA_POLL for i in range(len(total_accel))]

    linear_z_dir = list(filter(lambda x: x < 0, linear_z[2:]))

    len_linear_z_dir = len(linear_z_dir)
    time = TIME_PER_DATA_POLL * len_linear_z_dir
    len_linear_z_velo = (sum(linear_z_dir) / len_linear_z_dir) / time
    print(f'len_linear_z_velo: {len_linear_z_velo}')

    velo_i = [0 for i in range(len(linear_z))]
    velo_f = []
    for i in range(len(linear_z)):
        if i == 0:
            velo_f.append(linear_z[i] * TIME_PER_DATA_POLL)
        else:
            velo_i[i] = velo_f[i-1]
            velo_f.append(velo_i[i] + linear_z[i] * TIME_PER_DATA_POLL)

    # velo_f = [(total_accel[i])
    #           * TIME_PER_DATA_POLL for i in range(len(total_accel))]

    position = [i / 2 + TIME_PER_DATA_POLL for i in velo_f]
    position_sum = [sum(position[2:i]) for i in range(len(position) - 2)]

    velo_f_mph = [x * 2.23694 for x in velo_f]

    v_len = len(velo_f_mph) if len(velo_f_mph) > 0 else 1

    final_velo = sum(velo_f_mph) / v_len

    # ! NEED TO ENSURE CORRECT UNITS
    return velo_f, velo_f_mph, final_velo, position_sum


def get_ball_speed(club, club_head_speed):
    return club_head_speed * CLUBHEADTOBALL[club]


def get_ball_distance(club_head_speed, ball_speed):
    dist_from_head_speed = club_head_speed * DISTMULTIPLIER_CH - 85.2
    dist_from_ball_speed = ball_speed * DISTMULTIPLIER_BS - 65.2

    # dist_from_head_speed = 0 if dist_from_head_speed < 0 else dist_from_head_speed
    # dist_from_ball_speed = 0 if dist_from_ball_speed < 0 else dist_from_ball_speed

    error = (dist_from_head_speed - dist_from_ball_speed)

    # TODO: Fix this
    return (dist_from_head_speed + dist_from_ball_speed) / 2


def get_smash_factor(club_head_speed, ball_speed):
    return ball_speed / club_head_speed


def get_launch_angle(club, angle):
    pass


def get_club_face_angle(anglur_accel):
    pass


def _convert_from_g(data):
    return [round(i * G, 2) for i in data]


def _get_gs(data):
    return [(i / 32678) * 8 for i in data]


def _get_dps(data):
    return [(i * 8.75) / 1000 for i in data]


def plot_acceleration(linear_accel, angular_accel, position, linear_velo):
    data_len = len(linear_accel)
    time = [i * TIME_PER_DATA_POLL for i in range(data_len - 2)]
    fig, axs = plt.subplots(2, 2)
    # plot the linear acceleration
    axs[0, 0].plot(time, linear_accel[2:])
    axs[0, 0].scatter(time, linear_accel[2:])

    # plot the angular acceleration
    axs[0, 1].plot(time, angular_accel[2:])
    axs[0, 1].scatter(time, angular_accel[2:])

    # plot the position
    position_time = [i * TIME_PER_DATA_POLL for i in range(len(position) - 2)]
    axs[1, 0].plot(time, position)
    axs[1, 0].scatter(time, position)

    # plot the linear velocity
    axs[1, 1].plot(time, linear_velo[2:])
    axs[1, 1].scatter(time, linear_velo[2:])

    # set the titles
    axs[0, 0].set_title('Linear Acceleration vs Time')
    axs[0, 1].set_title('Angular Acceleration vs Time')
    axs[1, 0].set_title('Position vs Time')
    axs[1, 1].set_title('Linear Velocity vs Time')

    # set the x and y labels
    axs[0, 0].set(xlabel='Time (s)', ylabel='Linear Acceleration (m/s^2)')
    axs[0, 1].set(xlabel='Time (s)',
                  ylabel='Angular Acceleration (degrees/s^2)')
    axs[1, 0].set(xlabel='Time (s)', ylabel='Position (m)')
    axs[1, 1].set(xlabel='Time (s)', ylabel='Linear Velocity (m/s)')

    # set the tight layout
    plt.tight_layout()

    # show the plot
    plt.show()


if __name__ == "__main__":
    # data = [58, -6284, 1224, -1927, 222, -619, -19929, -22686, -20341, 3275, -32129, -8871, -424, -483, -189, -3881, 494, -1198, 218, -5088, 645, -3872, 479, -1244, -351, -361, -61, -3865, 446, -1222, -375, -350, -144, -3866, 456, -1181, -273, -410, -3, -3890, 466, -1232, -541, -515, -116, -3880, 463, -1217, -484, -528, -21, -3871, 378, -1140, -114, -532, 113, -3882, 423, -1190, -83, -361, 8, -3893, 440, -1251, -551, -446, -121, -3885, 440, -1223, -829, -574, -314, -3906, 441, -1205, -17, -306, 114, -3914, 391, -1214, -192, -406, -38, -3817, 299, -1151, -769, -588, -375, -3851, 399, -1187, -405, -321, -541, -3719, 406, -1040, -124, -327, -19, -3759, 369, -1088, 22, 83, -442, -4016, 493, -1014, 533, 128, -300, -3785, 364, -964, 2094, -222, 447, -4124, 539, -1097, -778, -767, -991, -4169, 463, -1184, 6544, 2024, 2830, -4128, 572, -775, 2949, 317, 1141, -4066, 833, -818, -4642, -1382, 453, -5577, 1258, 228, 11072, 3577, 5951, -4769, 876, -550, -5073, -4213, 601, -5349, -1026, 886, -15195, -4693, -3821, -5655, -101, 746, 7623, -6577, 3789, -5223, -540, 2062, 5294, -5426, 3891, -5111, -816, 1637, -583, -13283, -2032, -5984, -1010, 1359, 4211, -9949, 770, -5700, -615, 1743, 266, -16413, -4737, -6786, -847, 597, 978, -14415, -2324, -6349, -818, 928, 9427, -16437, -2688, -6601, 318, 438, 7683, -15726, -3473, -6759, -870, 288, -1689, -18957, -8479, -5494, 130, 172, -7253, -21084, -10241, -6020, 423, 383, 628, -17093, -7983, -4874, 593, 188, -208, -18366, -8003, -5326, 789, 258, -850, -15259, -5717, -3960, 962, 590, 7085, -14376, -3425, -4510, 890, 481, 4018, -10752, -1006, -2987, 890, 863, 4889, -12124, -1702, -3387, 732, 526, 5768, -6387, 798, -2072, 625, 956, 2509, -9016, -973, -2396, 499, 907, 2233, -4059, -15, -1451, 429, 1250, 2388, -5795, -542, -1812, 666, 1208, 237, -1506, 313, -1244, 569, 1246, 1877, -2708, 424, -1294, 540, 1239, 1031, 1852, 1216, -1270, 537, 869, -207, -44, 483, -1228, 479, 1116, 1248, 5819, 1385, -1448, 404, 1058, 1978, 3869, 1780, -1358, 615, 941, 1926, 9657, 1954, -2140,
    #         561, 376, 1547, 8077, 1701, -1756, 368, 720, 3288, 13693, 2423, -3311, 552, 164, 3199, 11456, 2391, -2600, 392, 332, 2419, 16889, 1786, -4547, 700, -605, -591, 14220, 261, -3868, 738, -347, -1127, 20796, 251, -6227, 856, -1050, 2108, 19234, 1731, -5495, 980, -650, -4975, 23157, -471, -7049, 846, -1570, -202, 22946, 1132, -6664, 854, -1417, -1597, 25083, 1650, -7536, 544, -2268, -5879, 23621, -205, -7376, 388, -2118, -11145, 24753, -3529, -8130, 468, -2729, -4915, 25709, -711, -7854, 1139, -2179, -6853, 24152, 1128, -7682, 369, -2961, -8530, 24410, -506, -7911, -269, -3052, -15277, 20545, -1704, -7031, 277, -2401, -11772, 21743, -1001, -7274, 552, -2666, -12258, 13927, -428, -4821, 261, -2284, -17877, 17364, -2302, -6150, 171, -2613, -14342, 8642, -1206, -3520, 161, -1599, -15492, 10154, -1771, -4165, 494, -1652, -6285, 6985, 1264, -2639, 651, -1496, -8353, 8597, 1360, -3083, 195, -1631, -5153, 3016, -419, -2040, 821, -1161, -5799, 4998, 575, -2308, 813, -1321, -1325, 867, -1155, -1610, 1118, -1012, -2342, 2240, -455, -1772, 906, -1050, 493, -1685, -2211, -1585, 1163, -1102, -839, -549, -1826, -1529, 1161, -977, 2235, -4146, -3044, -2051, 1378, -1431, 2041, -2754, -2285, -1750, 1279, -1294, 3880, -5328, -4741, -2648, 925, -1647, 3159, -5002, -3981, -2353, 1068, -1376, 2581, -8241, -7280, -3251, 1570, -1963, 3945, -7066, -5982, -2872, 1003, -1899, -1873, -11051, -11509, -3822, 1150, -2376, -4758, -11499, -11948, -3501, 1346, -2085, 10972, -9186, -8173, -4167, 1372, -2365, 2508, -11336, -11848, -4058, 1141, -2449, 6746, -11428, -9008, -4777, 1709, -2485, 7914, -10939, -9606, -4504, 1941, -2516, 11193, -9226, -5344, -4812, 1671, -2419, 4533, -11693, -9548, -4907, 1558, -2583, 3136, -10310, -6267, -4556, 1796, -2398, 6930, -9764, -5594, -4800, 2052, -2257, 9415, -6516, -154, -4534, 2165, -2189, 9804, -7710, -1883, -4313, 1757, -2320, 5149, -4155, -477, -4478, 1840, -2274, 2870, -6716, -2044, -4632, 2018, -2251, 494, -2055, -241, -4382, 1855, -2216, 3625, -2906, -147, -4381, 1974, -2167]
    data = [35, -6284, 1474, 1553, -440, -1204, -17882, -22942, -20469, 3275, -15746, -679, 111, 358, -109, 3143, -905, -2372, 232, -4969, 679, 3085, -881, -2358, 47, -87, -296, 3128, -927, -2369, 107, -238, -269, 3169, -935, -2394, 68, -313, -317, 3173, -921, -2392, 38, -154, -300, 3150, -921, -2392, 111, -112, -285, 3204, -886, -2398, 108, -91, -330, 3179, -899, -2393, 186, 21, -210, 3192, -876, -2364, 151, -225, -255, 3214, -882, -2372, 211, 146, -100, 3212, -907, -2350, 201, -38, -128, 3196, -883, -2355, 109, -486, -118, 3148, -929, -2371, 146, -52, -139, 3200, -926, -2390, 128, -520, -138, 3190, -905, -2382, 109, -94, -55, 3195, -914, -2378, 175, -16, -153, 3113, -887, -2385, 184, -304, -103, 3111, -896, -2368, 250, -104, -291, 3108, -931, -2346, 243, -238, -209, 3115, -907, -2339, 178, 447, -442, 3177, -947, -2329, 191, -40, -345, 3121, -942, -2332, 131, 161, -331, 3207, -895, -2303, 168, -84, -474, 3201, -926, -2338, 60, -373, -232, 3269, -924, -2392, 108, 288, -225, 3266, -893, -2367, 135, -337, 70, 3132, -1007, -2414, 151, -565, -43, 3181, -973, -2387, 401, -524, -244, 3125, -1119, -2483, 274, -753, -9, 3127, -1061, -2429, 560, -545, -543, 3147, -1205, -2470, 500, -679, -487, 3123, -1172, -2480, 671, 57, -330, 3179, -1213, -2444, 605, -404, -497, 3129, -1216, -2442, 734, 141, -136, 3222, -1189, -2359, 716, -431, -226, 3267, -1197, -2455, 597, 254, 222, 3112, -1134, -2348, 769, 406, 16, 3197, -1140, -2403, 377, 2835, 117, 3088, -1195, -2248, 502, 2177, 275, 3082, -1172, -2272, 560, 2729, -215, 3220, -1126, -2285, 332, 3879, -16, 3033, -1215, -2174, 833, 2665, -762, 3239, -981, -1998, 596, 1239, -711, 3289, -996, -2133, 744, 1858, -652, 3527, -845, -2021, 724, 3224, -686, 3436, -930, -2142, 821, 1227, -436, 3802, -732, -1827, 1022, 1251, -364, 3624, -799, -1875, 453, 580, -98, 3591, -693, -1819, 758, 539, -377, 3702, -715, -1803, 328, -1395, 148, 3533, -729, -1707, 565, -1421, 169, 3594, -
            702, -1746, -324, -2410, 191, 3211, -1079, -1899, 64, -2178, 46, 3332, -832, -1775, 468, 166, -715, 3157, -1063, -1695, -143, -1606, -172, 3301, -1172, -1799, 378, -185, -1301, 3369, -1125, -2016, 557, 1643, -900, 3300, -1060, -2044, 416, 129, -870, 3453, -766, -1823, 320, 488, -928, 3372, -948, -1802, -147, -245, -521, 3602, -752, -1717, 291, -391, -421, 3462, -761, -1741, -730, -763, -719, 3437, -842, -1743, -395, -629, -632, 3536, -807, -1729, -785, -53, -269, 3458, -893, -1863, -794, -728, -358, 3386, -855, -1724, -727, 700, -326, 3439, -869, -1876, -802, -790, -366, 3395, -896, -1884, -469, 701, -117, 3259, -797, -1948, -518, 143, -398, 3407, -817, -1926, -270, 842, -331, 3235, -885, -1917, -493, 1370, -128, 3295, -847, -2004, -303, 1947, -722, 2984, -725, -1826, -205, 1310, -560, 3095, -816, -1885, -216, 2481, -981, 2885, -578, -1555, -209, 1932, -707, 2961, -652, -1677, -277, 3731, -1573, 2856, -358, -1593, -253, 4552, -1353, 2776, -436, -1566, -341, 4079, -3035, 2679, -260, -1530, -341, 2790, -2280, 2844, -367, -1520, 115, 3620, -4544, 2826, -83, -1497, -188, 4176, -3844, 2742, -164, -1590, 805, 5487, -6141, 2919, 326, -1555, 362, 5352, -5253, 2819, 89, -1459, 2050, 6276, -7496, 3119, 774, -1262, 1424, 4429, -6787, 3019, 566, -1412, 3314, 6433, -8209, 3433, 1233, -934, 2772, 6237, -7952, 3287, 1006, -1179, 4725, 8079, -8151, 3672, 1759, -628, 4025, 7883, -8194, 3590, 1473, -801, 6083, 10121, -7482, 3818, 2197, -294, 5460, 9282, -7849, 3752, 2028, -435, 7768, 10003, -7098, 3853, 2431, 176, 7021, 9472, -7174, 3814, 2295, -15, 8837, 6814, -6361, 3686, 2744, 519, 8412, 8363, -6807, 3750, 2558, 277, 9692, 9016, -6323, 3695, 3230, 572, 9110, 8892, -6465, 3656, 3013, 618, 11460, 9205, -5886, 3495, 3738, 670, 10504, 8455, -6268, 3641, 3486, 741, 12975, 10154, -4191, 3461, 3996, 944, 12197, 8582, -4953, 3626, 3900, 817, 13708, 10479, -1879, 3441, 4380, 896, 13232, 11165, -2881, 3383, 4191, 777, 3859, -6161, -413, 483, -1805, -2934, 7999, 18074, 26173, 25757, -6173, -27991, -78, 114, 84, -781, -3317, -2213, 2168, -5385, -361, -941, -3243, -2182, -369, -736, 893, -1022, -3347, -2246, 124, 803, -1205, -964, -3402, -2298, -36, 399, -674, -973, -3370, -2257, -170, -42, 8, -791, -3325, -2184, -51, 244, -405, -847, -3334, -2243, -367, -605, 702, -939, -3342, -2256, -168, -386, 358, -837, -3307, -2218, -97, -80, -41, -945, -3355, -2278, -30, -97, 115, -901, -3375, -2273, 163, 480, -738, -875, -3320, -2232, -28, -344, 316, -1024, -3348, -2214, 61, 334, -498, -927, -3385, -2248, 199, 514, -863, -939, -3366, -2267, -83, -492, 673, -812, -3356, -2224, 69, 181, -414, -813, -3280, -2184, -201, -858, 1009, -961, -3304, -2222, -243, -501, 323, -932, -3329, -2187, 11, 144, -409, -980, -3313, -2233, -246, 241, -459, -797, -3372, -2197, -126, -4, -234, -824, -3339, -2156, -386, -710, 890, -875, -3329, -2211, -40, 471, -997, -998, -3358, -2219, 52, 312, -629, -1123, -3425, -2296, 97, 795, -1007, -750, -3385, -2256, 383, 546, -898, -841, -3385, -2103, -306, -1496, 1840, -906, -3379, -2150, -216, -1270, 952, -859, -3540, -2106, 97, -381, 177, -1105, -3488, -2174, -188, -699, -110, -1132, -3574, -2059, 22, -26, -931, -918, -3545, -2039, 238, 219, -1092, -912, -3547, -1963, -272, -1205, 486, -935, -3533, -1954, -93, -1540, 1119, -802, -3538, -1996, 285, -274, -650, -1104, -3651, -2143, 522, 273, -793, -1228, -3505, -2079, 784, 1327, -2271, -852, -3464, -1982, 966, 4038, -4882, -597, -3426, -1899, -112, -599, 1140, -571, -3400, -1846, 369, 1580, -2246, -826, -3568, -2195, 187, 2322, -2328, -999, -3531, -2027, -551, 163, -760, -247, -3311, -2031, -238, -208, -804, -726, -3454, -2307, -132, -143, -836, -910, -3489, -2455, 749, 4330, -5985, -582, -3433, -2251, 620, 1858, -3500, -151, -3382, -2470, -175, -1815, 1216, -72, -3434, -2356, 146, -481, -289, -516, -3297, -2399, 32, 237, -719, -541, -3430, -2596, 450, -294, -279, -312, -3275, -2427, 56, -1836, 2060, -281, -3227, -2282, 186, -881, 608, -719, -3486, -1985, -335, -1645, 2036, -579, -3329, -2169, -93, 1224, -2854, 364, -3199, -1851, -1211, -4382, 5380, 19, -3365, -1950, -884, -519, -870, -1148, -3703, -2314, 206, 3990, -4984, -751, -3567, -2224, -118, 1303, -2226, 60, -3115, -2063, -1245, -3683, 3874, -277, -3237, -1999, -1255, -2499, 3417, -470, -3414, -2523, 376, 1838, -2513, -843, -3321, -2449, -525, 1220, -1049, -590, -3243, -2133, -742, -22, 333, 59, -3369, -2286, -314, 1087, -378, -233, -3378, -2215, -900, -1174, 2664, -444, -3262, -2101, -792, -86, 1360, -252, -3287, -2180, -484, 645, 206, -589, -3335, -2237, -365, 822, 38, -724, -3236, -2225, -5, 2011, -1919, -428, -3218, -2173, -276, 1447, -1334, -464, -3204, -2136, -431, 825, -62, -411, -3258, -2142, -880, 1161, -818, -433, -2847, -1992, -641, 1083, -836, -583, -3082, -2173, -1120, 1471, -1478, -243, -2666, -2116, -586, 1812, -1905, -374, -2775, -2029, -935, 4292, -5875, -661, -2698, -2369, -1160, 3555, -3436, -16, -2573, -2146, -2842, 2326, -3822, 321, -2484, -2364, -3082, -844, 724, -478, -2544, -2316, -4178, 185, -2790, -363, -2367, -2496, -3128, 4000, -6814, -389, -2463, -2413, -4302, 3698, -9434, -88, -2192, -2823, -4787, 1392, -4976, 437, -2308, -2682, -6154, -739, -5889, 868, -1917, -2997, -5609, -1012, -4843, -134, -2095, -3042, -6042, -1113, -7680, 490, -1730, -3434, -4694, 2950, -12086, 580, -1895, -3313, -4519, 1542, -12914, 1198, -1437, -3729, -5112, -57, -9782, 1274, -1581, -3461, -3574, 684, -13427, 1510, -1241, -3946, -4249, 750, -12037, 1236, -1243, -3801, -2840, -193, -14237, 1846, -986, -3911, -3425, -884, -12309, 1775, -1166, -3991, -2436, -4472, -10500, 2040, -596, -4158, -2226, -1769, -13257, 1526, -791, -3953, -1180, -657, -16519, 2086, -342, -4278, -2175, -1921, -13982, 2553, -453, -4180, -308, -2910, -15976, 2312, 237, -4262, -1340, -4015, -13506, 2187, -85, -4442, 1909, -1838, -17830, 2465, 342, -4375, 684, -3403, -15394, 2362, 297, -4245, 4093, -3100, -16276, 2105, 588, -4523, 3564, -906, -18526, 2027, 479, -4489, 1816, -4401, 574, 3135, 21, -2470, -20154, -2853, -1440, 18768, -11225, -27621, 1989, -4603, 195, 3050, -1064, -2341, 1816, -4401, 574, 3135, 21, -2470, -47, 521, -125, 3171, -1098, -2359, 1989, -4603, 195, 3050, -1064, -2341, -30, -69, -188, 3222, -1132, -2402, -47, 521, -125, 3171, -1098, -2359, -75, 80, -238, 3138, -1120, -2373, -30, -69, -188, 3222, -1132, -2402, -56, 26, -235, 3147, -1115, -2364, -75, 80, -238, 3138, -1120, -2373, -61, -132, -258, 3175, -1118, -2367, -56, 26, -235, 3147, -1115, -2364, -92, 84, -258, 3151, -1098, -2369, -61, -132, -258, 3175, -1118, -2367, -33, 27, -228, 3164, -1087, -2360, -92, 84, -258, 3151, -1098, -2369, -17, -61, -199, 3186, -1082, -2330, -33, 27, -228, 3164, -1087, -2360, 12, 173, -180, 3147, -1071, -2314, -17, -61, -199, 3186, -1082, -2330, 68, 119, -123, 3148, -1080, -2329, 12, 173, -180, 3147, -1071, -2314, 23, 327, -115, 3206, -1106, -2358, 68, 119, -123, 3148, -1080, -2329, 33, 76, -96, 3173, -1123, -2405, 23, 327, -115, 3206, -1106, -2358, 0, -305, -53, 3123, -1120, -2384, 33, 76, -96, 3173, -1123, -2405, -41, 74, -89, 3193, -1112, -2364, 0, -305, -53, 3123, -1120, -2384, -6, -367, -80, 3192, -1100, -2342, -41, 74, -89, 3193, -1112, -2364, -6, -85, -150, 3132, -1084, -2329, -6, -367, -80, 3192, -1100, -2342, 52, 117, -130, 3144, -1080, -2348, -6, -85, -150, 3132, -1084, -2329, 44, -45, -209, 3154, -1103, -2318, 52, 117, -130, 3144, -1080, -2348, 59, 51, -265, 3125, -1120, -2325, 44, -45, -209, 3154, -1103, -2318, 77, 179, -268, 3171, -1129, -2309, 59, 51, -265, 3125, -1120, -2325, 19, 587, -338, 3223, -1141, -2323, 77, 179, -268, 3171, -1129, -2309, 54, 52, -335, 3136, -1116, -2336, 19, 587, -338, 3223, -1141, -2323, 8, 403, -281, 3120, -1092, -2315, 54, 52, -335, 3136, -1116, -2336, 0, 382, -188, 3228, -1103, -2367, 8, 403, -281, 3120, -1092, -2315, 44, -256, -156, 3184, -1132, -2370, 0, 382, -188, 3228, -1103, -2367, -23, -339, -153, 3071, -1176, -2359, 44, -256, -156, 3184, -1132, -2370, 74, -263, -58, 3111, -1211, -2347, -23, -339, -153, 3071, -1176, -2359, 153, -550, -111, 3206, -1266, -2310, 74, -263, -58, 3111, -1211, -2347, 262, -420, -218, 3240, -1328, -2362, 153, -550, -111, 3206, -1266, -2310, 332, -560, -319, 3188, -1373, -2409, 262, -420, -218, 3240, -1328, -2362, 376, -392, -410, 3097, -1404, -2393, 332, -560, -319, 3188, -1373, -2409, 461, -254, -341, 3026, -1419, -2375, 376, -392, -410, 3097, -1404, -2393, 477, 169, -218, 3054, -1414, -2392, 461, -254, -341, 3026, -1419, -2375, 543, -348, -139, 3156, -1401, -2363, 477, 169, -218, 3054, -1414, -2392, 559, 387, -67, 3132, -1384, -2345, 543, -348, -139, 3156, -1401, -2363, 515, 480, 13, 3038, -1328, -2422, 559, 387, -67, 3132, -1384, -2345, 525, 597, 100, 3062, -1329, -2335, 515, 480, 13, 3038, -1328, -2422, 375, 2688, 43, 3092, -1363, -2271, 525, 597, 100, 3062, -1329, -2335, 457, 3201, 48, 3108, -1377, -2188, 375, 2688, 43, 3092, -1363, -2271, 493, 4106, -126, 3204, -1383, -2144, 457, 3201, 48, 3108, -1377, -2188, 495, 2447, -238, 3372, -1299, -2201, 493, 4106, -126, 3204, -1383, -2144, 689, 1509, -312, 3438, -1182, -1996, 495, 2447, -238, 3372, -1299, -2201, 598, 3035, -628, 3364, -1173, -1961, 689, 1509, -312, 3438, -1182, -1996, 782, 3273, -600, 3338, -1122, -2061, 598, 3035, -628, 3364, -1173, -1961, 771, 1551, -276, 3400, -1047, -1954, 782, 3273, -600, 3338, -1122, -2061, 597, 1450, -360, 3652, -1021, -1900, 771, 1551, -276, 3400, -1047, -1954, 750, 1206, -278, 3722, -964, -1878, 597, 1450, -360, 3652, -1021, -1900, 501, 694, -337, 3596, -949, -1969, 750, 1206, -278, 3722, -964, -1878, 406, 240, -111, 3449, -898, -1949, 501, 694, -337, 3596, -949, -1969, 50, -1261, -80, 3442, -923, -1911, 406, 240, -111, 3449, -898, -1949, -29, -1517, 81, 3524, -943, -1826, 50, -1261, -80, 3442, -923, -1911]
    print(len(data))
    print(f'{"="*20} Testing {"="*20}\n')
    t, aa, x, y, z, ax, ay, az, d, accel, taa, tla = process_data(data)
    v, vf_m, fv, pos = get_club_head_speed(z, accel)
    print(f"INTIAL DATA: {t}\n")
    print(
        f'CLUB HEAD SPEED: \n\n{tabulate(zip(x,y,z,accel,v,vf_m), headers=["x (g)", "y (g)", "z (g)", "total (m/s^2)", "v (m/s i think)", "v (mph)"], tablefmt="pretty")}\n')
    print(f'FINAL VELOCITY: {fv:.2} mph\n')
    print(f'{"="*10} ACCEL {"="*10}\n')
    print('INITIAL ANGULAR ACCELERATION: ', aa, '\n')
    print(
        f'ANGULAR ACCELERATION: \n\n{tabulate(zip(ax,ay,az,d), headers=["x (??)", "y (??)", "z (??)", "dir"], tablefmt="pretty")}\n')

    print(f'{"="*10} BALL SPEED {"="*10}\n')
    print(f'BALL SPEED: {get_ball_speed("driver", fv):.2} mph\n')

    print(f'{"="*10} BALL DISTANCE {"="*10}\n')
    print(
        f'BALL DISTANCE: {get_ball_distance(fv, get_ball_speed("driver", fv)):.2} yards\n')

    print(f'{"="*10} SMASH FACTOR {"="*10}\n')
    print(
        f'SMASH FACTOR: {get_smash_factor(fv, get_ball_speed("driver", fv)):.2}\n')

    print(f'{"="*10} POSITION {"="*10}\n')
    print(pos[2:])

    print(f'{"="*10} PLOT {"="*10}\n')
    plot_acceleration(tla, taa, pos, vf_m)
